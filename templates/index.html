<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Analyseur Nutritionnel - Suivi des Apports Journaliers</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <h1 class="logo">üçé NutriTracker</h1>
                <p class="tagline">Analyseur Nutritionnel Intelligent</p>
            </div>
        </div>
    </header>

    <!-- Main Container -->
    <div class="container">
        <!-- User Profile Card -->
        <section class="card profile-card">
            <h2 class="card-title">üë§ Votre Profil</h2>
            <div class="profile-form">
                <div class="form-group">
                    <label for="age">√Çge</label>
                    <input type="number" id="age" min="18" max="120" value="30" placeholder="Votre √¢ge">
                </div>
                <div class="form-group">
                    <label for="sex">Sexe</label>
                    <select id="sex">
                        <option value="homme">Homme</option>
                        <option value="femme">Femme</option>
                    </select>
                </div>
                <button class="btn btn-primary" onclick="updateProfile()">
                    Mettre √† jour
                </button>
            </div>
            <div id="profile-info" class="profile-info"></div>
        </section>

        <!-- Search Section -->
        <section class="card search-card">
            <h2 class="card-title">üîç Rechercher un Produit</h2>

            <div class="tabs">
                <button class="tab-btn active" onclick="switchTab('barcode')">
                    üì± Code-barre
                </button>
                <button class="tab-btn" onclick="switchTab('name')">
                    üîé Nom du produit
                </button>
            </div>

            <!-- Barcode Search -->
            <div id="barcode-search" class="tab-content active">
                <div class="search-box">
                    <input type="text" id="barcode-input" placeholder="Ex: 3017624010701" class="search-input">
                    <button class="btn btn-primary" onclick="searchBarcode()">
                        Rechercher
                    </button>
                </div>
            </div>

            <!-- Name Search -->
            <div id="name-search" class="tab-content">
                <div class="search-box">
                    <input type="text" id="name-input" placeholder="Ex: Nutella, Coca Cola..." class="search-input">
                    <button class="btn btn-primary" onclick="searchByName()">
                        Rechercher
                    </button>
                </div>
                <div id="search-results" class="search-results"></div>
            </div>
        </section>

        <!-- Product Details -->
        <div id="product-details" class="card product-card" style="display: none;">
            <h2 class="card-title">üì¶ D√©tails du Produit</h2>
            <div id="product-info"></div>

            <div class="add-consumption">
                <h3>Ajouter au journal</h3>
                <div class="quantity-input">
                    <label for="quantity">Quantit√© (grammes):</label>
                    <input type="number" id="quantity" value="100" min="1" max="10000">
                    <button class="btn btn-success" onclick="addToJournal()">
                        ‚úÖ Ajouter
                    </button>
                </div>
            </div>
        </div>

        <!-- Daily Summary with Progress Indicators -->
        <section class="card summary-card">
            <div class="summary-header">
                <h2 class="card-title">üìä Bilan du Jour</h2>
                <p class="summary-date" id="current-date"></p>
            </div>

            <div id="loading" class="loading">
                <div class="spinner"></div>
                <p>Chargement...</p>
            </div>

            <div id="summary-content" style="display: none;">
                <!-- Calories -->
                <div class="nutrient-indicator">
                    <div class="nutrient-header">
                        <div class="nutrient-info">
                            <span class="nutrient-icon">‚ö°</span>
                            <span class="nutrient-name">Calories</span>
                        </div>
                        <div class="nutrient-values">
                            <span class="current-value" id="calories-current">0</span>
                            <span class="separator">/</span>
                            <span class="target-value" id="calories-target">0</span>
                            <span class="unit">kcal</span>
                        </div>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="calories-progress" style="width: 0%"></div>
                    </div>
                    <div class="percentage" id="calories-percentage">0%</div>
                </div>

                <!-- Prot√©ines -->
                <div class="nutrient-indicator">
                    <div class="nutrient-header">
                        <div class="nutrient-info">
                            <span class="nutrient-icon">üí™</span>
                            <span class="nutrient-name">Prot√©ines</span>
                        </div>
                        <div class="nutrient-values">
                            <span class="current-value" id="proteins-current">0</span>
                            <span class="separator">/</span>
                            <span class="target-value" id="proteins-target">0</span>
                            <span class="unit">g</span>
                        </div>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="proteins-progress" style="width: 0%"></div>
                    </div>
                    <div class="percentage" id="proteins-percentage">0%</div>
                </div>

                <!-- Glucides -->
                <div class="nutrient-indicator">
                    <div class="nutrient-header">
                        <div class="nutrient-info">
                            <span class="nutrient-icon">üçö</span>
                            <span class="nutrient-name">Glucides</span>
                        </div>
                        <div class="nutrient-values">
                            <span class="current-value" id="carbs-current">0</span>
                            <span class="separator">/</span>
                            <span class="target-value" id="carbs-target">0</span>
                            <span class="unit">g</span>
                        </div>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="carbs-progress" style="width: 0%"></div>
                    </div>
                    <div class="percentage" id="carbs-percentage">0%</div>
                </div>

                <!-- Lipides -->
                <div class="nutrient-indicator">
                    <div class="nutrient-header">
                        <div class="nutrient-info">
                            <span class="nutrient-icon">ü•ë</span>
                            <span class="nutrient-name">Lipides</span>
                        </div>
                        <div class="nutrient-values">
                            <span class="current-value" id="fat-current">0</span>
                            <span class="separator">/</span>
                            <span class="target-value" id="fat-target">0</span>
                            <span class="unit">g</span>
                        </div>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="fat-progress" style="width: 0%"></div>
                    </div>
                    <div class="percentage" id="fat-percentage">0%</div>
                </div>

                <!-- Additional Stats -->
                <div class="stats-grid">
                    <div class="stat-item">
                        <span class="stat-label">Produits consomm√©s</span>
                        <span class="stat-value" id="products-count">0</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- History Section -->
        <section class="card history-card">
            <h2 class="card-title">üìú Historique des Consommations</h2>
            <div class="history-controls">
                <button class="btn btn-secondary" onclick="loadHistory(7)">7 jours</button>
                <button class="btn btn-secondary" onclick="loadHistory(30)">30 jours</button>
            </div>
            <div id="history-content" class="history-content"></div>
        </section>
    </div>

    <!-- Toast Notifications -->
    <div id="toast-container" class="toast-container"></div>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <p>Aliment√© par <strong>OpenFoodFacts</strong> - Base de donn√©es collaborative de 2,9M+ produits</p>
            <p>D√©velopp√© avec ‚ù§Ô∏è pour votre sant√©</p>
        </div>
    </footer>

    <!-- JavaScript -->
    <script src="{{ url_for('static', filename='js/app.js') }}"></script>
</body>
</html>
